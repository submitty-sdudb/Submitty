<script type="text/javascript" src="{{ core.getConfig().getBaseUrl() }}/js/drag-and-drop.js"></script>
<div class="popup-form" id="upload-images-form">
    <h2>Upload Student Photos</h2>
    <p>&emsp;</p>
    <p>
        Follow the instructions to download images of students on:<br>
        <a href="http://submitty.org/instructor/photo_scraper">Photo Scraper</a><br><br>
        Upload images by zipping up multiple course sections together,<br>
        zipping up each course section, or uploading the png image(s).<br><br>
        Total files cannot exceed 10 mb or 10240 kb.<br>
    </p>
    <br/>


    <form method="post">
      <input type="hidden" name="csrf_token" value="{{ core.getCsrfToken() }}" />
      <div id="upload-boxes" style="display:table; border-spacing: 5px; width:100%">
        <div id="upload1" style="cursor: pointer; text-align: center; border: dashed 2px lightgrey; display:table-cell; height: 20px;">
          <h3 class="label" id="label">"Drag your file(s) here or click to open file browser"</h3>
          <input type="file" name="files" id="input_file1" style="display: none" onchange="addFilesFromInput(1,false)" multiple />
        </div>
      </div>
      <div style="float: right; width: auto">
          <a onclick="$('#upload-images-form').css('display', 'none');" class="btn btn-danger">Cancel</a>
          <input class="btn btn-primary" id="submit" type="submit" value="Submit" />
      </div>
    </form>
    <script type="text/javascript">
        function makeSubmission() {
            handleDownloadImages('{{ core.getCsrfToken() }}');
        }
        $(function() {
            $("#submit").click(function(e){ // Submit button
                makeSubmission();
                e.stopPropagation();
            });
        });
    </script>
    <script type="text/javascript">
        createArray(1);
        var dropzone = document.getElementById("upload1");
        dropzone.addEventListener("click", clicked_on_box, false);
        dropzone.addEventListener("dragenter", draghandle, false);
        dropzone.addEventListener("dragover", draghandle, false);
        dropzone.addEventListener("dragleave", draghandle, false);
        dropzone.addEventListener("drop", dropWithMultipleZips, false);
    </script>
</div>
